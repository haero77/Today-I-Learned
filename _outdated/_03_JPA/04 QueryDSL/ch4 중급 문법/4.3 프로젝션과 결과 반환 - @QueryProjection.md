# í”„ë¡œì ì…˜ê³¼ ê²°ê³¼ ë°˜í™˜ - @QueryProjection

- DTOë¥¼ QTypeìœ¼ë¡œ ë§Œë“¤ì–´ì„œ ì‚¬ìš©í•˜ëŠ” ë°©ë²•


## @QueryProjection

```java
import com.querydsl.core.annotations.QueryProjection;

public class MemberDto {

	private String username;
	private int age;

	@QueryProjection
	public MemberDto(String username, int age) {
		this.username = username;
		this.age = age;
	}

}
```
```java
@Test
@DisplayName("DTO ì¡°íšŒ - @QueryProjection")
void findDtoByQueryProjection() {
    List<MemberDto> result = queryFactory
            .select(new QMemberDto(member.username, member.age))
            .from(member)
            .fetch();

    for (MemberDto memberDto : result) {
        System.out.println("memberDto = " + memberDto);
    }
}
```

- ìƒì„±ìì— `@QueryProjection` ì‚¬ìš©.
- Gradle > other > compileQuerydsl ì´í›„ QTypeì˜ ìƒì„±ìë¥¼ ì´ìš©í•œë‹¤.

<br>

### Constructor ë°©ì‹ê³¼ì˜ ì°¨ì´

- `Projections.constructor`ëŠ” ëŸ°íƒ€ì„ ì‹œì ì— ì—ëŸ¬ê°€ ë°œìƒ.
  - ğŸ‘‰ ì‹¤ì œ ìœ ì €ê°€ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ëŠ” ì‹œì ì— ì™€ì„œì•¼ ì—ëŸ¬ê°€ ë°œìƒ.
- `@QueryProjection`ì€ ì»´íŒŒì¼ ì‹œì ì— ì—ëŸ¬ê°€ ë°œìƒ.

<br>

### @QueryProjection ë‹¨ì 

1. QTypeì„ ìƒì„±í•´ì•¼í•œë‹¤.
2. (ì•„í‚¤í…ì²˜) DTOê°€ Querydslì„ ì•Œê²Œëœë‹¤.
   - ê¸°ì¡´ì—ëŠ” DTOê°€ Querydslì„ ì „í˜€ ëª¨ë¥´ë‹¤ê°€, @QueryProjection ì„ ì‚¬ìš©í•¨ìœ¼ë¡œì¨ Querydslì„ ì•Œê²Œëœë‹¤.
   - ë‚˜ì¤‘ì— Querydsl ë¼ì´ë¸ŒëŸ¬ë¦¬ ì˜ì¡´ì„±ì„ ì‚­ì œí•˜ëŠ” ê²½ìš°ê°€ ìƒê¸°ë©´, DTO ì—­ì‹œ ìˆ˜ì •ì´ ì¼ì–´ë‚˜ê²Œ ëœë‹¤.

<br>

### ê·¸ë˜ì„œ DTOë¡œ ê²°ê³¼ ë°˜í™˜ ì‹œì—ëŠ” ì–´ë–¤ ê²ƒì„ ì‚¬ìš©í•´ì•¼í•˜ë‚˜?

- DTOë¥¼ ìˆœìˆ˜í•˜ê²Œ ìœ ì§€í•˜ê³  ì‹¶ì€ ê²½ìš°ì—ëŠ” `í”„ë¡œí¼í‹° ì ‘ê·¼/í•„ë“œ ì§ì ‘ ì ‘ê·¼/ìƒì„±ì` ë“±ì„ ì‚¬ìš©
- ì‹¤ìš©ì ì¸ ê´€ì ì—ì„œëŠ” `@QueryProjection`ì´ ì¢‹ë‹¤.
  - Querydsl ì˜ì¡´í•˜ê³  ìˆê³ , í•˜ë¶€ ê¸°ìˆ ë„ ë°”ë€” ê²ƒ ê°™ì§€ ì•Šì„ ë•ŒëŠ” `@QueryProjection`ì´ ì‹¤ìš©ì ì´ë‹¤.

<br>

## DISTINCT ì‚¬ìš©ë²•

```java
 List<String> result = queryFactory
            .select(member.username).distinct()
            .from(member)
            .fetch();
```

- distinctëŠ” JPQLì˜ distinct ì™€ ê°™ë‹¤.