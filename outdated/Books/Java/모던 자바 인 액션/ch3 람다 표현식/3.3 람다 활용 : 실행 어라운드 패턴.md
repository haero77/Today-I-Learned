# 3.3 λλ‹¤ ν™μ©: μ‹¤ν–‰ μ–΄λΌμ΄λ“ ν¨ν„΄

### μ‹¤ν–‰ μ–΄λΌμ΄λ“ ν¨ν„΄?

<img src="https://github.com/haero77/Today-I-Learned/assets/65555299/039f5744-6b10-4df1-b8dd-ad24ea9b714b" width="500">

- μ‹¤μ  μ²λ¦¬ μ‘μ—… μ „ν›„μ— μ¤€λΉ„ μ½”λ“μ™€ μ •λ¦¬ μ½”λ“κ°€ λ‘λ¬μ‹ΈμΈ ν•νƒ

### μ‹¤ν–‰ μ–΄λΌμ΄λ“ ν¨ν„΄ μμ  

```java
// νμΌμ—μ„ ν• ν–‰μ„ μ½λ” μ½”λ“
public String processFile() throws IOException {
    try (BufferedReader br = 
        new BufferedReader(new FileReader("data.text"))) {
		
       return br.readLine(); // μ‹¤μ  ν•„μ”ν• μ‘μ—…μ„ ν•λ” ν–‰
    }
}
```

## 3.3.1 1λ‹¨κ³„ : λ™μ‘ νλΌλ―Έν„°ν™”λ¥Ό κΈ°μ–µν•λΌ

- ν„μ¬ μ½”λ“λ” νμΌμ—μ„ ν• λ²μ— ν• μ¤„λ§ μ½μ„ μ μμ.
- ν• λ²μ— λ‘ μ¤„μ„ μ½κ±°λ‚ κ°€μ¥ μμ£Ό μ‚¬μ©λλ” λ‹¨μ–΄λ¥Ό λ°ν™ν•λ ¤λ©΄ μ–΄λ–»κ² ν•΄μ•Όν• κΉ?
  - κΈ°μ΅΄μ μ„¤μ •, μ •λ¦¬ κ³Όμ •μ€ μ¬μ‚¬μ©.
  - `processFile()` λ©”μ„λ“λ§ λ‹¤λ¥Έ μΆ…μ‘μ„ μν–‰ν•λ„λ΅ λ…λ Ή.
  - π‘‰ **`processFile`μ λ™μ‘μ„ νλΌλ―Έν„°ν™”**
- **λ™μ‘μ€ λλ‹¤λ¥Ό μ΄μ©ν•΄μ„ μ „λ‹¬**ν•  μ μμ.

```java
String result = processFile(
	(BufferedReader br) -> br.readLine() + br.readLine()	
);
```

## 3.3.2 2λ‹¨κ³„ : ν•¨μν• μΈν„°νμ΄μ¤λ¥Ό μ΄μ©ν•΄μ„ λ™μ‘ μ „λ‹¬

- ν•¨μν• μΈν„°νμ΄μ¤ μλ¦¬μ— λλ‹¤λ¥Ό μ‚¬μ©ν•  μ μλ‹¤. 
- `BufferedReader -> String` κ³Ό `IOException`μ„ λμ§ μ μλ” μ‹κ·Έλ‹μ²μ™€ μΌμΉν•λ” ν•¨μν• μΈν„°νμ΄μ¤λ¥Ό λ§λ“¤κ³ , μ΄λ¥Ό νλΌλ―Έν„°λ΅ ν™μ©

```java
@FunctionalInterface
public interface BufferedReaderProcessor {

	String process(BufferedReader b) throws IOException;

}
```
```java
public String processFile(BufferedReaderProcessor p) throws IOException {
	
        ...
        
}
```

## 3.3.3 3λ‹¨κ³„ : λ™μ‘ μ‹¤ν–‰

- λλ‹¤ ν‘ν„μ‹μΌλ΅ ν•¨μν• μΈν„°νμ΄μ¤μ μ¶”μƒ λ©”μ„λ“ κµ¬ν„μ„ μ§μ ‘ μ „λ‹¬ κ°€λ¥
  - μ „λ‹¬λ μ½”λ“λ” ν•¨μν• μΈν„°νμ΄μ¤μ μΈμ¤ν„΄μ¤λ΅ μ „λ‹¬λ μ½”λ“μ™€ κ°™μ€ λ°©μ‹μΌλ΅ μ²λ¦¬
  - π‘‰ processFile λ°”λ”” λ‚΄μ—μ„ **BufferedReaderProcessor κ°μ²΄μ processλ¥Ό νΈμ¶**κ°€λ¥

```java
public String processFile(BufferedReaderProcessor p) throws IOException {
  try (BufferedReader br = new BufferedReader(new FileReader("data.text"))) {
      // BufferedReader κ°μ²΄ μ²λ¦¬
      return p.process(br);
  }
}
```

## 3.3.4 4λ‹¨κ³„ : λλ‹¤ μ „λ‹¬ 

- λλ‹¤λ¥Ό ν†µν•΄ λ‹¤μ–‘ν• λ™μ‘μ„ processFile λ©”μ„λ“λ΅ μ „λ‹¬ κ°€λ¥

```java
ReaderV2 readerV2 = new ReaderV2();

// μ „λ¶€ κ°™μ€ ν‘ν„ λ°©μ‹μ„
String oneLine = 
        readerV2.processFile((BufferedReader br) -> br.readLine());
// String oneLine 
        // = readerV2.processFile(br -> br.readLine());
// String oneLine 
        // = readerV2.processFile(BufferedReader::readLine);


String twoLines = 
        readerV2.processFile((BufferedReader br) -> br.readLine() + "\n" + br.readLine());
```